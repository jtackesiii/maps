$(document).ready(function(){const map=L.map("mapdiv",{zoomControl:false});var mapCenter=$("#coords").text();var coordinates=mapCenter.split(/,\s*/).map(function(v){return+v;});var zoomLevel=$("#zoom").text();map.setView(L.latLng(coordinates),zoomLevel);Esri_WorldImagery=L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',{attribution:'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'}).addTo(map);map.on('dragend',function(){console.log('New center: ',map.getCenter());});L.control.scale({position:'topright',imperial:true}).addTo(map);var geojson=$("#geojson").text()
$.getJSON(geojson,geodata=>{L.geoJSON(geodata,{onEachFeature:(feature,layer)=>{layer.bindPopup(function(layer){return layer.feature.properties.name;});layer.on('mouseover',function(){layer.openPopup();});layer.on('mouseout',function(){layer.closePopup();});var element=document.getElementById(layer.feature.properties.id);layer.on('click',function(){element.scrollIntoView({behavior:'smooth',block:'start'})});$("article.post.dropcase").scroll(function(){if($('h1.activeAnchor').attr('id')===layer.feature.properties.id){layer.openPopup();}});},pointToLayer:function(feature,latlng){return L.marker(latlng,{icon:L.divIcon({html:`<i style="color: IndianRed; text-shadow: 1px 1px 4px black;" class="fas fa-map-marker"></i>`,iconSize:[22,50]})});},style:function(geoJsonFeature){return{"color":"IndianRed"}}}).addTo(map);});});